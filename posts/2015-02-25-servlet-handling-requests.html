<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Servlet Handling of Requests | Dev|Blog: The First Year</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-anchors/plugin.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../posts/2015-03-10-interlude-and-announcement.html" />
    
    
    <link rel="prev" href="../posts/2015-02-19-servlet-implementation.html" />
    

        <script type="text/javascript" src="../js/emojify.min.js"></script><script type="text/javascript" src="../js/scripts.js"></script><link rel="stylesheet" type="text/css" href="../css/emojify-emoticons.min.css"><link rel="stylesheet" type="text/css" href="../css/emojify.min.css"><link rel="stylesheet" type="text/css" href="../css/styles.css">
    </head>
    <body>
        
        
    <div class="book"
        data-level="1.4"
        data-chapter-title="Servlet Handling of Requests"
        data-filepath="posts/2015-02-25-servlet-handling-requests.md"
        data-basepath=".."
        data-revision="Mon Jan 30 2017 03:59:20 GMT+0000 (UTC)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Intro
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="posts/SagaIntro.html">
            
                
                    <a href="../posts/SagaIntro.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        A Saga of Servlets
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="posts/2015-02-09-a-quick-note-on-JARs.html">
            
                
                    <a href="../posts/2015-02-09-a-quick-note-on-JARs.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        A Quick Note on JARs
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="posts/2015-02-16-servlet-intro-and-flavors.html">
            
                
                    <a href="../posts/2015-02-16-servlet-intro-and-flavors.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Servlet Intro and Flavors
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="posts/2015-02-19-servlet-implementation.html">
            
                
                    <a href="../posts/2015-02-19-servlet-implementation.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        Basic Servlet Implementation
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="1.4" data-path="posts/2015-02-25-servlet-handling-requests.html">
            
                
                    <a href="../posts/2015-02-25-servlet-handling-requests.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.</b>
                        
                        Servlet Handling of Requests
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="posts/2015-03-10-interlude-and-announcement.html">
            
                
                    <a href="../posts/2015-03-10-interlude-and-announcement.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.5.</b>
                        
                        Interlude and Announcement
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="posts/2015-03-19-servlets-handling-data-round-house-kick.html">
            
                
                    <a href="../posts/2015-03-19-servlets-handling-data-round-house-kick.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.6.</b>
                        
                        Servlet Handling Data, A Round House Kick
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="posts/2015-06-16-building-a-front-end-pt1-a-quick-review.html">
            
                
                    <a href="../posts/2015-06-16-building-a-front-end-pt1-a-quick-review.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.7.</b>
                        
                        Building a Front-End pt.1 Plus a Quick Review
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="posts/2015-06-17-building-a-front-end-pt2-an-app-with-angular.html">
            
                
                    <a href="../posts/2015-06-17-building-a-front-end-pt2-an-app-with-angular.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.8.</b>
                        
                        Building a Front-End pt.2: An App with AngularJS
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="posts/2015-06-22-servlet-series-review.html">
            
                
                    <a href="../posts/2015-06-22-servlet-series-review.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.9.</b>
                        
                        Series Review
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="posts/Supporting.html">
            
                
                    <a href="../posts/Supporting.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Supporting
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="posts/2014-08-18-rest-consumption-server-side.html">
            
                
                    <a href="../posts/2014-08-18-rest-consumption-server-side.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        RESTful API Consumption on the Server (Java)
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="posts/2014-08-19-server-rest-with-authentication.html">
            
                
                    <a href="../posts/2014-08-19-server-rest-with-authentication.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Server REST Consumption with Authentication
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="posts/2014-08-25-custom-JSON-with-Java-sized-XAgent.html">
            
                
                    <a href="../posts/2014-08-25-custom-JSON-with-Java-sized-XAgent.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        Custom JSON with Java-ized XAgent
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="posts/2014-10-24-application-logic.html">
            
                
                    <a href="../posts/2014-10-24-application-logic.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Application Logic
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="posts/2014-09-16-unraveling-the-mvc-mysteries.html">
            
                
                    <a href="../posts/2014-09-16-unraveling-the-mvc-mysteries.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Unraveling the M-V-C Mysteries
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="posts/2014-09-18-rest-is-best.html">
            
                
                    <a href="../posts/2014-09-18-rest-is-best.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        REST is Best
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="posts/2015-08-31-something-i-overheard-at-mwlug.html">
            
                
                    <a href="../posts/2015-08-31-something-i-overheard-at-mwlug.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        More on HTTP and AJAX Requests
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="posts/2014-09-29-what-is-an-spa.html">
            
                
                    <a href="../posts/2014-09-29-what-is-an-spa.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                        What is a Single Page Application(SPA)?
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="posts/Related.html">
            
                
                    <a href="../posts/Related.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Related
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="posts/2015-05-05-replacing-an-xagent.html">
            
                
                    <a href="../posts/2015-05-05-replacing-an-xagent.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        &quot;Replacing&quot; an XAgent
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="posts/2015-07-14-alternate-front-end-development.html">
            
                
                    <a href="../posts/2015-07-14-alternate-front-end-development.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        Alternate Front-End Development: Mocking Your Domino Back-end
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="posts/Java.html">
            
                
                    <a href="../posts/Java.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Java
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="posts/2015-01-09-when-you-need-a-comparator.html">
            
                
                    <a href="../posts/2015-01-09-when-you-need-a-comparator.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        When You Need a Comparator
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="posts/2015-01-23-building-java-objects-from-json.html">
            
                
                    <a href="../posts/2015-01-23-building-java-objects-from-json.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                        Building Java Objects from JSON
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" data-path="posts/JavaScript.html">
            
                
                    <a href="../posts/JavaScript.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        JavaScript
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="posts/2014-08-12-consistent-multivalue-formatting.html">
            
                
                    <a href="../posts/2014-08-12-consistent-multivalue-formatting.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                        Consistent Multi-Value Formatting in SSJS for Domino/XPages
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="posts/2014-09-03-fixing-dojo-161-in-domino-853.html">
            
                
                    <a href="../posts/2014-09-03-fixing-dojo-161-in-domino-853.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                        Fixing an Older Version of Dojo (1.6.1)
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="posts/2014-08-14-cal-picker-improver-dojo-only.html">
            
                
                    <a href="../posts/2014-08-14-cal-picker-improver-dojo-only.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.3.</b>
                        
                        An Dojo Implementation of the Calendar Picker Script
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7" data-path="posts/Other.html">
            
                
                    <a href="../posts/Other.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        Other
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1" data-path="posts/2015-03-23-brief-intro-to-nginx.html">
            
                
                    <a href="../posts/2015-03-23-brief-intro-to-nginx.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.1.</b>
                        
                        A Brief Introduction to Nginx
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="posts/2015-07-07-self-hosting-scm-server.html">
            
                
                    <a href="../posts/2015-07-07-self-hosting-scm-server.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.2.</b>
                        
                        Self-Hosting SCM Server
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="posts/2014-08-11-redmine-coderay-domino-syntax-highlighting.html">
            
                
                    <a href="../posts/2014-08-11-redmine-coderay-domino-syntax-highlighting.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.3.</b>
                        
                        Domino/XPages Design Element Syntax Highlighting on Redmine
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    
    <a href="../GLOSSARY.html" class="btn pull-left" aria-label="Glossary"><i class="fa fa-sort-alpha-asc"></i></a>
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >Dev|Blog: The First Year</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h3 id="previously-on-asagaofservlets">Previously, on <a href="http://twitter.com/search?q=%23ASagaOfServlets" target="_blank">#ASagaOfServlets</a></h3>
<p>So far in <a href="servlet-series">this series</a> I&apos;ve covered some <a href="xpages-servlets/servlet-intro-and-flavors">basics</a> on servlets, implementing our methods along with a showing of the <a href="xpages-servlets/servlet-intro-and-flavors#flavors-of-servlets">&quot;flavors&quot;</a> of servlets, and how to implement these servlets <a href="xpages-servlets/servlet-implementation">via a ServletFactory</a>. This has been the ground work for everything that comes next.</p>
<h3 id="what-to-do-with-my-servlet">What to Do With My Servlet?</h3>
<p>A servlet can be just about anything. It can receive a payload of data (or just handle a simple network GET request) and process and return almost anything. Ultimately, I want to provide <a href="../GLOSSARY.html#restful_api" class="glossary-term" title="An API which provides access via RESTful principles, as in HATEOAS.">RESTful API</a> interaction to the front-end side of my application, by:</p>
<ul>
<li>abstracting the CRUD operations, in order to</li>
<li>validate received data changes (not committing changes in case of failure, throwing an error, with messages, to the user)</li>
<li>and provide a layer of business logic for those interactions, enforcing a set of rules by which all data objects will adhere to (I have previously described this as &quot;loose schema&quot;, which is a misnomer, as the entire purpose of a schema is to provide <a href="http://en.wikipedia.org/wiki/Database_schema" target="_blank"><em>strict</em> provisioning</a> at the db level; aka- integrity constraints)</li>
</ul>
<h3 id="receiving-requests">Receiving Requests</h3>
<p>As I&apos;ve mentioned above, I&apos;ve referenced a pattern of /collection/{:id} for an <a href="../GLOSSARY.html#endpoint" class="glossary-term" title="Endpoint, the entry point to a service, a process, or a queue or topic destination in service-oriented architecture">endpoint</a>. The basic premise is that you provide the base <a href="../GLOSSARY.html#endpoint" class="glossary-term" title="Endpoint, the entry point to a service, a process, or a queue or topic destination in service-oriented architecture">endpoint</a> of .../collection (usually shown as the plural version, so for a collection of users, it would be /user<strong>s</strong>) which at the base level gives the full collection, but when is followed by a route parameter of an ID (for example, a 32-character length hexadecimal value,&lt; like our <a href="../GLOSSARY.html#notes" class="glossary-term" title="IBM Notes (formerly Lotus Notes) is a client of a collaborative client-server software platform sold by IBM.">Notes</a> Document UNIDs), it will handle requests specific to that document. This effectively makes our servlet at one <a href="../GLOSSARY.html#endpoint" class="glossary-term" title="Endpoint, the entry point to a service, a process, or a queue or topic destination in service-oriented architecture">endpoint</a> a two-part affair. Here&apos;s the approach I&apos;ll be using, with strictly <em>application/<a href="../GLOSSARY.html#json" class="glossary-term" title="JSON (JavaScript Object Notation) is an open standard format that uses human-readable text to transmit data objects consisting of attribute&#x2013;value pairs. It is the primary data format used for asynchronous browser/server communication, largely replacing XML (used by AJAX).">json</a></em> content type.</p>
<h4 id="formatting-and-documentation">Formatting and Documentation</h4>
<table>
<thead>
<tr>
<th>Route</th>
<th>Methods Allowed</th>
</tr>
</thead>
<tbody>
<tr>
<td>.../collection</td>
<td>GET</td>
</tr>
<tr>
<td>.../collection/{:id}</td>
<td>GET, POST, PUT, DELETE</td>
</tr>
</tbody>
</table>
<p>One major benefit of using a <a href="../GLOSSARY.html#rest" class="glossary-term" title="In computing, Representational State Transfer (REST) is the software architectural style of the World Wide Web. REST gives a coordinated set of constraints to the design of components in a distributed hypermedia system that can lead to a higher-performing and more maintainable architecture. To the extent that systems conform to the constraints of REST they can be called RESTful. RESTful systems typically, but not always, communicate over HTTP with the same HTTP verbs (GET, POST, PUT, DELETE, etc.) which web browsers use to retrieve web pages and to send data to remote servers. REST interfaces with external systems using resources identified by URI, for example /people/tom, which can be operated upon using standard verbs, such as DELETE /people/tom.">REST</a> <a href="../GLOSSARY.html#api" class="glossary-term" title="In computer programming, an application programming interface (API) is a set of routines, protocols, and tools for building software applications. An API expresses a software component in terms of its operations, inputs, outputs, and underlying types. An API defines functionalities that are independent of their respective implementations, which allows definitions and implementations to vary without compromising the interface. A good API makes it easier to develop a program by providing all the building blocks. The programmers then put the blocks together.">API</a> framework in <a href="../GLOSSARY.html#java" class="glossary-term" title="Java is a general-purpose computer programming language that is concurrent, class-based, object-oriented, and specifically designed to have as few implementation dependencies as possible. It is intended to let application developers &quot;write once, run anywhere&quot; (WORA), meaning that compiled Java code can run on all platforms that support Java without the need for recompilation. Java applications are typically compiled to bytecode that can run on any Java virtual machine (JVM) regardless of computer architecture. As of 2015, Java is one of the most popular programming languages in use, particularly for client-server web applications, with a reported 9 million developers.">Java</a> is the ability to automate your documentation. Documentation is one of the most important aspects of <a href="../GLOSSARY.html#rest" class="glossary-term" title="In computing, Representational State Transfer (REST) is the software architectural style of the World Wide Web. REST gives a coordinated set of constraints to the design of components in a distributed hypermedia system that can lead to a higher-performing and more maintainable architecture. To the extent that systems conform to the constraints of REST they can be called RESTful. RESTful systems typically, but not always, communicate over HTTP with the same HTTP verbs (GET, POST, PUT, DELETE, etc.) which web browsers use to retrieve web pages and to send data to remote servers. REST interfaces with external systems using resources identified by URI, for example /people/tom, which can be operated upon using standard verbs, such as DELETE /people/tom.">REST</a> APIs (especially in publicly accessible ones), as if those who will consume them don&apos;t know how to interact with them, they won&apos;t be worth anything. Usually documentation includes the endpoints, allowed methods, and request and response structure.</p>
<h4 id="route-matching">Route Matching</h4>
<p>We&apos;ll be handling multiple routed paths off a single collection <a href="../GLOSSARY.html#endpoint" class="glossary-term" title="Endpoint, the entry point to a service, a process, or a queue or topic destination in service-oriented architecture">endpoint</a> (the collection and the <code>collection/{:id}</code>). The approach I&apos;ll be implementing in the route matching will make use of regular expressions. This involves defining a pattern and testing that against the requested path for a match. This will make use of <em><a href="../GLOSSARY.html#java" class="glossary-term" title="Java is a general-purpose computer programming language that is concurrent, class-based, object-oriented, and specifically designed to have as few implementation dependencies as possible. It is intended to let application developers &quot;write once, run anywhere&quot; (WORA), meaning that compiled Java code can run on all platforms that support Java without the need for recompilation. Java applications are typically compiled to bytecode that can run on any Java virtual machine (JVM) regardless of computer architecture. As of 2015, Java is one of the most popular programming languages in use, particularly for client-server web applications, with a reported 9 million developers.">java</a>.util.regex.Pattern</em> and <em><a href="../GLOSSARY.html#java" class="glossary-term" title="Java is a general-purpose computer programming language that is concurrent, class-based, object-oriented, and specifically designed to have as few implementation dependencies as possible. It is intended to let application developers &quot;write once, run anywhere&quot; (WORA), meaning that compiled Java code can run on all platforms that support Java without the need for recompilation. Java applications are typically compiled to bytecode that can run on any Java virtual machine (JVM) regardless of computer architecture. As of 2015, Java is one of the most popular programming languages in use, particularly for client-server web applications, with a reported 9 million developers.">java</a>.util.regex.Matcher</em>, respectively.</p>
<p>Since we will get a true match with <em><a href="http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#find()" target="_blank">Matcher.find()</a></em> from a partial subset, it&apos;s important to test in a descending order from the more complex <a href="../GLOSSARY.html#endpoint" class="glossary-term" title="Endpoint, the entry point to a service, a process, or a queue or topic destination in service-oriented architecture">endpoint</a> down to the simplest; the raw collection. It probably ought to look something like this:</p>
<pre><code class="lang-java"><span class="hljs-comment">// in a method to parse route params</span>

<span class="hljs-comment">// Accommodate two requests, one for all resources, another for a specific resource</span>
<span class="hljs-keyword">private</span> Pattern regExAllPattern = Pattern.compile(<span class="hljs-string">&quot;/collection&quot;</span>);
<span class="hljs-comment">// a UNID is 32-char hex, /collection/{:unid}</span>
<span class="hljs-comment">// UNID ref: http://www-01.<a href="../GLOSSARY.html#ibm" class="glossary-term" title="International Business Machines Corporation (commonly referred to as IBM) is an American multinational technology and consulting corporation, with headquarters in Armonk, New York. IBM manufactures and markets computer hardware, middleware and software, and offers infrastructure, hosting and consulting services in areas ranging from mainframe computers to nanotechnology.">ibm</a>.com/support/docview.wss?uid=swg21112556</span>
<span class="hljs-keyword">private</span> Pattern regExIdPattern = Pattern.compile(<span class="hljs-string">&quot;/collection/([0-9a-fA-F]{32})&quot;</span>);

<span class="hljs-comment">// regex parse pathInfo</span>
Matcher matcher;

<span class="hljs-comment">// Check for ID case first, since the All pattern would also match</span>
matcher = regExIdPattern.matcher(pathInfo);
<span class="hljs-keyword">if</span> (matcher.find()) {
    unid = Integer.parseInt(matcher.group(<span class="hljs-number">1</span>));
    System.out.println(<span class="hljs-string">&quot;do something with this document, the id is: &quot;</span>+unid);
}

matcher = regExAllPattern.matcher(pathInfo);
<span class="hljs-keyword">if</span> (matcher.find()) {
    System.out.println(<span class="hljs-string">&quot;do something with the collection&quot;</span>);
}

<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ServletException(<span class="hljs-string">&quot;Invalid URI&quot;</span>);
</code></pre>
<p><br></p>
<p>[EDIT]</p>
<p>It was brought to my attention that route matching is easier via @ annotations, as one might use via an approach <a href="jersey.java.net">with Jersey</a>. I absolutely agree, but up until now, for this series, I&apos;ve taken a framework-free approach to generating and implementing servlets. I&apos;ll just say that there&apos;s a very good reason that such frameworks are out there, and even implementing just the pieces for the @ annotations could be effort well spent. I fully welcome any response piece on this topic, as I&apos;m not experienced with Jersey (my preference to RegEx matching comes from my <a href="../GLOSSARY.html#nodejs" class="glossary-term" title="Node.js is an open-source, cross-platform runtime environment for developing server-side web applications. Node.js applications are written in JavaScript and can be run within the Node.js runtime on OS X, Microsoft Windows, Linux, FreeBSD, NonStop, IBM AIX, IBM System z and IBM i. Its work is hosted and supported by the Node.js Foundation, a collaborative project at Linux Foundation.">NodeJS</a>/Express <a href="../GLOSSARY.html#api" class="glossary-term" title="In computer programming, an application programming interface (API) is a set of routines, protocols, and tools for building software applications. An API expresses a software component in terms of its operations, inputs, outputs, and underlying types. An API defines functionalities that are independent of their respective implementations, which allows definitions and implementations to vary without compromising the interface. A good API makes it easier to develop a program by providing all the building blocks. The programmers then put the blocks together.">API</a> experience).</p>
<p>[/EDIT]</p>
<h4 id="route-parameters">Route Parameters</h4>
<p>Now that we&apos;ve handled the route, it&apos;s time to handle any route parameters. Route parameters can be a little confusing, seeing how they look just like another route, but they can also be useful. Strictly speaking, the <code>/{:id}</code> is a form of route parameter, but they can also be nested (sequential?) to provide more echelons in a hierarchy. I previously built a single-purpose <a href="../GLOSSARY.html#nodejs" class="glossary-term" title="Node.js is an open-source, cross-platform runtime environment for developing server-side web applications. Node.js applications are written in JavaScript and can be run within the Node.js runtime on OS X, Microsoft Windows, Linux, FreeBSD, NonStop, IBM AIX, IBM System z and IBM i. Its work is hosted and supported by the Node.js Foundation, a collaborative project at Linux Foundation.">NodeJS</a>/Express app that provided an <a href="../GLOSSARY.html#api" class="glossary-term" title="In computer programming, an application programming interface (API) is a set of routines, protocols, and tools for building software applications. An API expresses a software component in terms of its operations, inputs, outputs, and underlying types. An API defines functionalities that are independent of their respective implementations, which allows definitions and implementations to vary without compromising the interface. A good API makes it easier to develop a program by providing all the building blocks. The programmers then put the blocks together.">API</a> to handles requests to our <a href="../GLOSSARY.html#ibm" class="glossary-term" title="International Business Machines Corporation (commonly referred to as IBM) is an American multinational technology and consulting corporation, with headquarters in Armonk, New York. IBM manufactures and markets computer hardware, middleware and software, and offers infrastructure, hosting and consulting services in areas ranging from mainframe computers to nanotechnology.">IBM</a> i for DB2 access; the specifics of that project were to have a three-level deep hierarchy of required information. This is generally a bit deeper than most people will go with route parameters, but it serves to illustrate the concept. My requests look like this:</p>
<pre><code class="lang-javascript">.../api/{:firstLevelParam}/{:secondLevelParam}/{:thirdLevelParam}
</code></pre>
<p>Route parameters are a way of handling required, hierarchically defining values in a request. They&apos;re not the only way and many people don&apos;t like them, but I&apos;m a fan (for such hierarchical requirements). To parse them out, we need a handle on the <em>HttpServletRequest</em>&apos;s <em>pathInfo</em> property. We then split it off the <em>/</em> character to have a collection, in this case a <em>List&lt;String&gt;</em> of all the route path elements. Since the first three are related to the structure of the servlet, we need to start checking at the 4th (3rd position).</p>
<pre><code class="lang-java">String reqPath = req.getPathInfo();
out.println(<span class="hljs-string">&quot;pathInfo: &quot;</span> + reqPath);
List&lt;String&gt; routeParm = Arrays.asList(reqPath.split(<span class="hljs-string">&quot;/(.*?)&quot;</span>));
<span class="hljs-keyword">if</span>(routeParm.size() &gt; <span class="hljs-number">3</span>) {
    <span class="hljs-comment">// /nsf/xsp/servletname is the base, so the fourth is the first routeParm</span>
    <span class="hljs-keyword">for</span>( <span class="hljs-keyword">int</span> i=<span class="hljs-number">3</span>; i&lt;routeParm.size(); i++ ) {
        out.println( <span class="hljs-string">&quot;routeParm: &quot;</span> + routeParm.get(i) );
    }
} <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// didn&apos;t have any route parameters after the base</span>
    out.println(<span class="hljs-string">&quot;routeParm: &quot;</span> + <span class="hljs-string">&quot;none&quot;</span>);
}
</code></pre>
<p><br></p>
<h4 id="query-parameters">Query Parameters</h4>
<p>Query parameters should be familiar to every <a href="../GLOSSARY.html#xpages" class="glossary-term" title="XPages is a rapid web and mobile application development technology. It allows data from IBM Notes and Relational Databases to be displayed to browser clients on all platforms. The programming model is based on web development languages and standards including JavaScript, Ajax, Java, the Dojo Toolkit, Server-side JavaScript and JavaServer Faces. XPages uses IBM Domino, IBM&apos;s rapid application development platform, including functionality such as the document-oriented database.">XPages</a> developer. <s>In fact, it&apos;s so normal that I&apos;ll just mentioned that you may wish to use a <em>VariableResolver</em> to populate your <em>Map&lt;String, String&gt;</em> as opposed to performing a <em>split</em> on the <a href="http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getQueryString()" target="_blank"><em>queryString</em></a> of the <em>HttpServletRequest</em>.</s></p>
<p>[Edit]</p>
<p>Thanks to <a href="twitter.com/Gidgerby">Jesse Gallagher</a> for catching something here. You can resolve <em>param</em>, but it would be better to use something else as it behaves as a <em>Map&lt;String,String&gt;</em>, <strong>not</strong> a <em>Map&lt;String,String[]&gt;</em>. If you&apos;re performing an <em>HttpServletRequest.getQueryString()</em>,  you will get a <em><a href="../GLOSSARY.html#java" class="glossary-term" title="Java is a general-purpose computer programming language that is concurrent, class-based, object-oriented, and specifically designed to have as few implementation dependencies as possible. It is intended to let application developers &quot;write once, run anywhere&quot; (WORA), meaning that compiled Java code can run on all platforms that support Java without the need for recompilation. Java applications are typically compiled to bytecode that can run on any Java virtual machine (JVM) regardless of computer architecture. As of 2015, Java is one of the most popular programming languages in use, particularly for client-server web applications, with a reported 9 million developers.">java</a>.lang.String</em> back, with which contains your results. You can manually pull this apart, but you should really use the <a href="docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameterMap("><strong><em>getParameterMap</em></strong> method</a>) on your <em>HttpServletRequest</em> (the method is inherited from <em>ServletRequest</em>) as this <em>does return</em> a <em>Map&lt;String,String[]&gt;</em>, ensuring you get keyed values for each of multiple values per key. I&apos;ve used the method elsewhere, I&apos;m not sure what my brain was thinking up above, but I suspect it was a lack of caffeine <img src="../images/emoji/coffee.png" alt="coffee" style="height:auto;width:21px;">.</p>
<pre><code class="lang-java">Map&lt;String, String[]&gt; param = (Map&lt;String, String[]&gt;) req.getParameterMap();
</code></pre>
<p>[/Edit]</p>
<h3 id="restful-apis">RESTful APIs?</h3>
<p>How is this all <a href="../GLOSSARY.html#rest" class="glossary-term" title="In computing, Representational State Transfer (REST) is the software architectural style of the World Wide Web. REST gives a coordinated set of constraints to the design of components in a distributed hypermedia system that can lead to a higher-performing and more maintainable architecture. To the extent that systems conform to the constraints of REST they can be called RESTful. RESTful systems typically, but not always, communicate over HTTP with the same HTTP verbs (GET, POST, PUT, DELETE, etc.) which web browsers use to retrieve web pages and to send data to remote servers. REST interfaces with external systems using resources identified by URI, for example /people/tom, which can be operated upon using standard verbs, such as DELETE /people/tom.">REST</a>? How is it an <a href="../GLOSSARY.html#api" class="glossary-term" title="In computer programming, an application programming interface (API) is a set of routines, protocols, and tools for building software applications. An API expresses a software component in terms of its operations, inputs, outputs, and underlying types. An API defines functionalities that are independent of their respective implementations, which allows definitions and implementations to vary without compromising the interface. A good API makes it easier to develop a program by providing all the building blocks. The programmers then put the blocks together.">API</a>? APIs, for those living under a rock, are an <a href="../GLOSSARY.html#application_programming_interface" class="glossary-term" title="In computer programming, an application programming interface (API) is a set of routines, protocols, and tools for building software applications. An API expresses a software component in terms of its operations, inputs, outputs, and underlying types. An API defines functionalities that are independent of their respective implementations, which allows definitions and implementations to vary without compromising the interface. A good API makes it easier to develop a program by providing all the building blocks. The programmers then put the blocks together.">Application Programming Interface</a>; the <a href="../GLOSSARY.html#notes" class="glossary-term" title="IBM Notes (formerly Lotus Notes) is a client of a collaborative client-server software platform sold by IBM.">Notes</a>/<a href="../GLOSSARY.html#domino" class="glossary-term" title="IBM Domino (formerly Lotus Domino) is the server of a collaborative client-server software platform sold by IBM.">Domino</a> <a href="../GLOSSARY.html#api" class="glossary-term" title="In computer programming, an application programming interface (API) is a set of routines, protocols, and tools for building software applications. An API expresses a software component in terms of its operations, inputs, outputs, and underlying types. An API defines functionalities that are independent of their respective implementations, which allows definitions and implementations to vary without compromising the interface. A good API makes it easier to develop a program by providing all the building blocks. The programmers then put the blocks together.">API</a> is how we interact with, reference, and use <a href="../GLOSSARY.html#notes" class="glossary-term" title="IBM Notes (formerly Lotus Notes) is a client of a collaborative client-server software platform sold by IBM.">Notes</a>/<a href="../GLOSSARY.html#domino" class="glossary-term" title="IBM Domino (formerly Lotus Domino) is the server of a collaborative client-server software platform sold by IBM.">Domino</a> entities. Providing access to invoke calls and operations over a <a href="../GLOSSARY.html#rest" class="glossary-term" title="In computing, Representational State Transfer (REST) is the software architectural style of the World Wide Web. REST gives a coordinated set of constraints to the design of components in a distributed hypermedia system that can lead to a higher-performing and more maintainable architecture. To the extent that systems conform to the constraints of REST they can be called RESTful. RESTful systems typically, but not always, communicate over HTTP with the same HTTP verbs (GET, POST, PUT, DELETE, etc.) which web browsers use to retrieve web pages and to send data to remote servers. REST interfaces with external systems using resources identified by URI, for example /people/tom, which can be operated upon using standard verbs, such as DELETE /people/tom.">REST</a> <a href="../GLOSSARY.html#api" class="glossary-term" title="In computer programming, an application programming interface (API) is a set of routines, protocols, and tools for building software applications. An API expresses a software component in terms of its operations, inputs, outputs, and underlying types. An API defines functionalities that are independent of their respective implementations, which allows definitions and implementations to vary without compromising the interface. A good API makes it easier to develop a program by providing all the building blocks. The programmers then put the blocks together.">API</a> means that we have logic build into our network calls to our <a href="../GLOSSARY.html#endpoint" class="glossary-term" title="Endpoint, the entry point to a service, a process, or a queue or topic destination in service-oriented architecture">endpoint</a>. <a href="../GLOSSARY.html#rest" class="glossary-term" title="In computing, Representational State Transfer (REST) is the software architectural style of the World Wide Web. REST gives a coordinated set of constraints to the design of components in a distributed hypermedia system that can lead to a higher-performing and more maintainable architecture. To the extent that systems conform to the constraints of REST they can be called RESTful. RESTful systems typically, but not always, communicate over HTTP with the same HTTP verbs (GET, POST, PUT, DELETE, etc.) which web browsers use to retrieve web pages and to send data to remote servers. REST interfaces with external systems using resources identified by URI, for example /people/tom, which can be operated upon using standard verbs, such as DELETE /people/tom.">REST</a> is an approach, it has to do with stateless data requests, uses the HTTP VERBs, and is generally descriptive in format. There&apos;s not a governing true specification, just some basic rules. If you want to read more on <a href="../GLOSSARY.html#rest" class="glossary-term" title="In computing, Representational State Transfer (REST) is the software architectural style of the World Wide Web. REST gives a coordinated set of constraints to the design of components in a distributed hypermedia system that can lead to a higher-performing and more maintainable architecture. To the extent that systems conform to the constraints of REST they can be called RESTful. RESTful systems typically, but not always, communicate over HTTP with the same HTTP verbs (GET, POST, PUT, DELETE, etc.) which web browsers use to retrieve web pages and to send data to remote servers. REST interfaces with external systems using resources identified by URI, for example /people/tom, which can be operated upon using standard verbs, such as DELETE /people/tom.">REST</a> in general, I recommend <a href="scotch.io/bar-talk/designing-a-restful-web-api">this scotch.io post</a>.</p>
<h3 id="next-time">Next Time</h3>
<p>Up next will be a bit more code heavy, as I&apos;ll be walking the life cycle of data reception and response handling. It will cover an <a href="../GLOSSARY.html#endpoint" class="glossary-term" title="Endpoint, the entry point to a service, a process, or a queue or topic destination in service-oriented architecture">endpoint</a> governing a certain data type, provide a collection at the collection level, establish a data model that both our responses will use and the ingested data types will instantiate, and provide CRUD operations against a given document (the data object instance). It will be a fast-paced post, but it should be worth the read.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../posts/2015-02-19-servlet-implementation.html" class="navigation navigation-prev " aria-label="Previous page: Basic Servlet Implementation"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../posts/2015-03-10-interlude-and-announcement.html" class="navigation navigation-next " aria-label="Next page: Interlude and Announcement"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-github/plugin.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-livereload/plugin.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"addcssjs":{"css":["css/emojify-emoticons.min.css","css/emojify.min.css","css/styles.css"],"js":["js/emojify.min.js","js/scripts.js"]},"github":{"url":"https://github.com/edm00se"},"toc":{"addClass":true,"className":"toc"},"anchors":{},"include":{},"include-codeblock":{},"highlight":{},"livereload":{},"youtube":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
